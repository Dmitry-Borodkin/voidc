{   v_import("voidc_types.void"); }

{   v_import("function_hack.void");
}

{   v_import("printf.void"); }


{   vptr = v_alloca(int);

    v_store(777, vptr);

    vref = v_reference(vptr);


    printf("vref: %d\n", vref);
}


{   typ0 = v_alloca(v_type_ref);

    int_ref = v_reference_type(int, 0);

    v_store(int_ref, typ0);

    ft = v_function_type(void, typ0, 1, false);

    f = v_function_hack("tryref", ft);

    v_add_parameter_name(f, 0, "vref", int_ref);
}
{
    printf("tryref: %d\n", vref);
}


{   v_debug_print_module(1); }
{
    tryref(888);

    vptr = v_alloca(int);

    v_store(999, vptr);

    vref = v_reference(vptr);

    tryref(vref);
}



